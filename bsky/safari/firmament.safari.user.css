/* ==UserStyle==
@name           Firmament
@namespace      https://github.com/haraiva/userstyles/tree/main/bsky
@version        1.0.0
@description    a customisable theme for Bluesky Social by @haraiva.bsky.social
@author         haraiva.bsky.social
@license        MIT
@match          *://*.bsky.app/*
==/UserStyle== */


/* ðŸ“Œ USER SETTINGS */
    /* Modify these as you wish! */
:root{

    /* COLOUR PALETTE */
        /* Default palette. 
        Install firmamement.themes.user.css for pre-made themes. Or you could copy the values over if you want? */
    --option-accent: #5f8e76;
    --option-bg: #000f10;
    --option-fg: #e9daca;
    --option-border: #396a51;
        /* Value from 0% to 100% */
    --border-tint: 25%;
        /* Text that appears on accented buttons */
        /* Same as fg: var(--fg) */
        /* Same as bg: var(--bg) */
    --option-accent-fg: var(--fg);

    /* CUSTOM TITLE */ 
        /* Use custom title: none */
        /* Use default Bsky title: 0px */
    --use-title: none;
        /* Icon in quotes */
    --title: 'ðŸŒ™';

    /* FONT SETTINGS */
        /* Use custom font: var(--font-family) */
        /* Use default Bsky font: 'InterVariable' */
    --use-font: 'InterVariable';
        /* Font name in quotes */
    --font-family: 'Arial';
    --line-height: 1.3;

    /* METRICS */
        /* Hide: none */
        /* Show: inline */
    --hide-metrics: inline;
    --hide-notifications: inline;
        /* Hide: transparent */
        /* Show: var(--accent-fg) */
    --hide-notifications-number: var(--accent-fg);

    /* ACCESSIBILITY */
        /* Hide: none */
        /* Show (keyboard navigation): 1px auto */
    --disable-outlines: none;
}
/* END OF USER SETTINGS */

/*
    Section headings (search for the emoji to jump to them quickly!)
    ðŸ”˜ CONTROLS
    ðŸªŸ POP-UPS AND MODALS
    ðŸ“ POST EDITOR
    ðŸ› ï¸ SETTINGS AND MODERATION UI
    ðŸ” SEARCH
    ðŸ§­ NAVIGATION
    ðŸ  FEEDS
    ðŸ“ƒ POSTS
    ðŸ”” NOTIFICATIONS
    ðŸ’¬ CHAT
    ðŸ‘¤ PROFILE
    ðŸ“± MOBILE
*/

:root {
    --theme: var(--option-theme);
    
    --bg: var(--option-bg);
    --bg-darker: color-mix(in srgb, var(--bg) 75%, black);
    --bg-lighter: color-mix(in srgb, var(--bg) 75%, white);
    --bg-translucent: color-mix(in srgb, var(--bg) 75%, transparent);
    --bg-more-translucent: color-mix(in srgb, var(--bg)30%, transparent);
    
    --fg: var(--option-fg);
    --fg-translucent: color-mix(in srgb, var(--fg) 65%, transparent);
    --fg-more-translucent: color-mix(in srgb, var(--fg) 40%, transparent);
    
    --accent: var(--option-accent);
    --accent-translucent: color-mix(in srgb, var(--accent) 50%, transparent);
    --accent-more-translucent: color-mix(in srgb, var(--accent) 25%, transparent);
    
    --highlight: color-mix(in srgb, var(--fg) 15%, transparent);
    --post-highlight: color-mix(in srgb, var(--fg) 3%, transparent);
    
    --border: color-mix(in srgb, var(--option-border) var(--border-tint), var(--bg));
    --box-shadow: 0 0 40px black;
    
    /* override for all html.themes */
    --text: var(--fg) !important;
    --background: var(--bg !important);
    --backgroundLight: var(--bg) !important;
    background-color: var(--bg) !important; 
}
    
    /* resetting and overriding this mess */
    [style*="color"] {
        background-color: unset !important;
        color: var(--fg) !important;
        text-decoration-color: currentColor !important;
    }
    
    [style*="border-color"] { border-color: var(--border) !important; }
    
    [fill*="#"] { fill: var(--fg-translucent); }
    
    /* but not the 'danger zone' stuff! */
    [style*="color: rgb(235, 36, 82)"] { 
        color: rgb(235, 36, 82) !important; 
        font-weight: bold !important; 
    }
    
    .r-19shd9j path { fill: rgb(209, 16, 67); }
    
    /* font override */
    :not(.material-symbols-outlined, .material-icons) {
        font-family: var(--use-font), InterVariable, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Liberation Sans', Helvetica, Arial, sans-serif !important;
        line-height: var(--line-height, 1.3) !important;
    }
    
    /* selection */
    ::selection {
        background-color: color-mix(in srgb, var(--accent) 30%, transparent);
    }
    
    /* focus outline */
    *:focus {
        outline: var(--disable-outlines, none);
    }
    
    /* GRADIENTS */
    div[style*="background: linear-gradient(to left"] { background: linear-gradient(to left, var(--bg) 0%, var(--bg) 80%, transparent 100%) !important; }
    div[style*="background: linear-gradient(to right"] { background: linear-gradient(to right, var(--bg) 0%, var(--bg) 80%, transparent 100%) !important; }
    div[style*="background: linear-gradient(to top"] { background: linear-gradient(to top, var(--bg) 0%, transparent 100%) !important; }
    div[style*="background: linear-gradient(rgb()"] { background: linear-gradient(to bottom, var(--bg) 0%, transparent 100%) !important; }
    
    /* OPACITY */
    /* reset */
    [style*="opacity: 0."] { opacity: 1 !important; }
    /* post hover opacity */
    [style*="transition-property: opacity;"] { background-color: var(--post-highlight) !important; }
    
    /* SPLASH AND LOADING */
    #splash > svg > path, [fill="url(#sky)"] { fill: var(--accent) !important; }
    div[role="progressbar"] svg > circle { stroke: var(--accent) !important; }
    div[role="progressbar"] svg > circle:first-child { opacity: 0.2 !important; }
    .rotate-500ms path { fill: var(--accent) !important; }
    
    
    /* CUSTOM TITLE */
    [data-testid="HomeScreen"] svg:has(> path[d^="M13.873"]) { 
        width: 100% !important; 
        align-items: center; justify-content: center;
        path { fill: var(--accent); }
    }
    [data-testid="HomeScreen"] svg:has(> path[d^="M13.873"])  {  
        display: var(--use-title); 
    }
    [data-testid="HomeScreen"] *:has(> svg > path[d^="M13.873"])::after { 
        order: -1;
        height: var(--use-title);
        content: var(--title);
        font-size: 32px;
        background-color: var(--accent);
        color: transparent;
        -webkit-background-clip: text;
        background-clip: text; 
    }
    
    /* ðŸ”˜ CONTROLS */

    /* text fields */
    input, textarea { 
        color: var(--fg) !important;  
        border-radius: 8px; 
        }
    input::placeholder,
    textarea::placeholder,
    .ProseMirror p.is-editor-empty:first-child::before { 
        color: var(--fg-translucent) !important; 
    }
    
    .ProseMirror p { color: var(--fg) !important; }
    .ProseMirror span { color: var(--accent) !important; }
    
    /* input background */
    input + div[style*="border-radius: 8px"],
    textarea + div[style*="border-radius: 8px"] { 
        background-color: var(--bg-darker) !important; 
        border-color: transparent !important;
    }
    
    /* LINKS */
    [rel="noopener noreferrer"], [role="link"]
    { color: var(--accent) !important; }
    
    
    /* BUTTONS */
    /* disabled buttons */
    [aria-disabled="true"], [disabled=""] { opacity: 0.5; }
    
    /* round and rounded buttons */
    [style*="border-radius: 999px"] { 
        background-color: var(--bg-darker) !important; 
        &:hover { background-color: var(--highlight) !important; }
        > div { color: var(--fg-translucent) !important; }
    }
    
    /* rounded rectangular buttons */
    /* 'Follows You' and ALT */
    [style*="border-radius: 4px"] { background-color: var(--bg-darker) !important; }
    /*  */
    button[style*="border-radius: 8px"]:hover, a[style*="border-radius: 8px"]:hover { background-color: var(--highlight) !important; }
    
    /* follow button */
    button[aria-label="Follow"], 
    button[aria-label="Follow back"], 
    button[data-testid="followBtn"] { 
        > div { color: var(--accent-fg) !important; }
        > div:has(svg) path { fill: var(--accent-fg-translucent) !important}
        background-color: var(--accent) !important; 
        &:hover { background-color: var(--accent-translucent) !important;  }
    }
    
    /* unfollow button */
    button[aria-label="Following"],
    button[data-testid="unfollowBtn"] {
        background-color: var(--accent-more-translucent) !important;
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* save button */
    button[aria-label^="Save"],
    button[aria-label="Done"]{ 
        background-color: var(--accent) !important;
        div { color: var(--accent-fg) !important; }
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* 'confirm' button of all sorts */
    button[data-testid="confirmBtn"],
    button[aria-label^="Yes"],
    [aria-label*="email settings"] [aria-label^="Update"],
    [aria-label="Send email"],
    [aria-label="Change password dialog"] [aria-label="Request code"],
    [data-testid="createAccountButton"] {
        background-color: var(--accent) !important;
         > div { color: var(--accent-fg) !important; }
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* pin feed button */
    button[aria-label="Add this feed to your feeds"],
    div[role="dialog"] > div button[aria-label="Pin feed"][style*="border-radius: 8px"] {
        background-color: var(--accent) !important;
        > div { color: var(--accent-fg) !important; }
        > div:has(svg) path { fill: var(--accent-fg-translucent) !important}
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* add- and new- buttons */
    button[aria-label^="New"],
    button[aria-label="Add mute word with chosen settings"] {
        background-color: var(--accent-more-translucent) !important;
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* more lowkey buttons */
    button[aria-label="Already have a code?"],
    button[data-testid="signInButton"] {
        background-color: var(--fg-more-translucent) !important;
        &:hover { background-color: var(--highlight) !important; }
    }
    
    /* buttons with gradients */
    div:has(> [aria-label="Scroll right"]) { background: linear-gradient(to left, var(--bg) 0%, var(--bg) 80%, transparent 100%) !important; }
    div:has(> [aria-label="Scroll left"]) { background: linear-gradient(to right, var(--bg) 0%, var(--bg) 80%, transparent 100%) !important; }
    
    /* checkmark */
    [aria-label="View this user's verifications"] svg,
    svg:has(circle + path[d^="M17.659 8.175a1.361"]) { 
        circle { fill: var(--accent) !important; }
        path { fill: var(--accent-fg) !important; }
    }
    /* scalloped checkmark */
    [aria-label="View this user's verifications"] svg,
    svg:has(path + path[d^="M17.861 8.26a1.438"]) { 
        path:first-child { fill: var(--accent) !important; }
        path:last-child { fill: var(--accent-fg) !important; }
    }
    
    /* ðŸªŸ POP-UPS */
    div[aria-label="Close active dialog"],
    div[role="dialog"]:has([data-testid="composePostView"])
    { 
        background-color: #00000095 !important;
        button[style*="border-radius: 8px"] { background-color: var(--bg-darker) !important; }
        button[style*="border-radius: 8px"]:hover { background-color: var(--highlight) !important; }
        [role="dialog"] { background-color: var(--bg) !important; box-shadow: var(--box-shadow) !important; }
    }
    
    /* lists modal */
    div:has(> [data-testid="userAddRemoveListsModal"]) {
        background-color: var(--bg) !important;
        [data-testid="userAddRemoveListsModal"] > div > span { color: var(--accent) !important;}
    }
    
    /* drop to add images pop up */
    div:has(> div > [data-testid="composePostView"]) + div[style*="visibility: initial"] > div { background-color: var(--bg) !important; }
    
    /* header for list and chat user select */
    div[role="dialog"] div:has(div > div > input) { background-color: var(--bg) !important; }
    
    div[role="menu"] > div { 
        background-color: var(--bg) !important;
        color: var(--fg) !important; 
        
        [data-testid*="Btn"], [role="menuitem"] { 
            background-color: transparent !important;
            &:hover { background-color: var(--highlight) !important; }
            > div { color: var(--fg) !important; }
            path { fill: var(--fg-translucent) !important; }
            
           > div[style*="border-radius: 999px"] > div { background-color: var(--accent) !important; }
        }
    } 
    
    div[role="separator"] { background-color: var(--border) !important; }
    
    /* drop down menu and selector */
    button[role="combobox"] { 
        background-color: var(--bg-darker) !important; 
        }
    
    div[role="listbox"] { 
        background-color: var(--bg-darker) !important; 
        [role="option"] { 
            background-color: transparent !important;
            &:hover { background-color: var(--highlight) !important; }
        }
    }
    
    /* profile preview */
    div[style*="will-change: transform"] > div { 
        > div { background-color: var(--bg) !important; }
        
         a[href*="/profile/"] > div > div:last-child > div {
            color: var(--fg-translucent) !important;
         }
        
        a[href*="/followers"],
        a[href*="/follows"] { 
            display: var(--hide-metrics);
            > span { color: var(--fg-translucent) !important; }
            &:hover { text-decoration-color: var(--fg-translucent) !important; }
            }
        }
        
        a[href*="/known-followers"] div, 
        a[href*="/known-followers"] span { color: var(--fg-translucent) !important; }
    
    /* languages */
    div:has(> [data-testid="contentLanguagesModal"]) { background-color: var(--bg) !important; }
    [data-testid="contentLanguagesModal"] button > div > div > div { background-color: var(--accent) !important; }
    [data-testid="confirmContentLanguagesBtn"] > div { 
        background: var(--accent) !important; 
        &:hover { background-color: var(--accent-translucent) !important; }
        > div { color: var(--fg) !important; }
    }
    
    /* ðŸ“ POST EDITOR */ 
    div:has(> [data-testid="composePostView"]) { box-shadow: var(--box-shadow) !important;  }
    [data-testid="composePostView"] { 
        background-color: var(--bg); 
        /* giving the editor more room */
        > div > div:has(p) { padding-block: 8px; }
    }
    
    [data-testid="composePostView"] button { 
        background-color: transparent !important; 
        svg > path { fill: var(--accent); }
    }
    
    
    /* image editing */
    button[aria-label="Add alt text"]:has(svg),
    button[data-testid="editPhotoButton"],
    button[data-testid="removePhotoButton"]
    { background-color: var(--bg-translucent) !important; }
    
    
    
    /* post settings button */
    button[data-testid="openReplyGateButton"],
    button[data-testid="labelsBtn"]{ 
        background-color: var(--bg-darker) !important; 
        svg > path { fill: var(--accent); }
    }
    
    /* post button */
    button[data-testid="composerPublishBtn"] {
            background-color: var(--accent) !important;
            > div { color: var(--accent-fg) !important; }
            &[aria-disabled="true"]:hover { background-color: var(--accent) !important; }
            &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* post character count */
    [data-testid='composePostView'] svg[width="30"][height="30"] path {
        &[stroke-linecap="butt"] { stroke: var(--accent) !important; }
        &:last-child { opacity: 0.4; }
        
        &[fill="#e60000" i] { fill: #e60000 !important; }
        &[stroke="#e60000" i] { stroke: #e60000 !important; }
    }
    
    /* alt text character count */
    [aria-label="Add alt text"] svg[width="26"][height="26"] path {
        stroke: var(--accent);
        &:last-child { opacity: 0.4; }
    }
    
    /* text under image */
    [data-testid="selectedPhotosView"] + div { 
        margin-top: 8px; 
        border: 1px solid var(--border) !important; 
        div { color: var(--fg-translucent) !important; }
        }
    
    
    /* ðŸ› ï¸ SETTINGS AND MODERATION UI */

    /* SETTINGS UI */
    
    /* RADIO */
    [role="radio"] svg > path { fill: var(--accent) !important; }
    [role="radio"] div[style*="border-radius: 999px"] {
        background-color: transparent !important;
        &:hover { background-color: transparent !important; }
    }
    
    /* checked */
    [role="radio"][aria-checked="true"] div[style*="border-radius: 999px"] { 
        border-color: var(--accent) !important;
        background-color: var(--bg-darker) !important;
        > div { background-color: var(--accent) !important; }
    }
    [role="radio"][aria-checked="true"]:has([style*="border-radius: 999px"]) > div:not([style*="font"]) {
        background-color: var(--accent-more-translucent) !important;
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* unchecked */
    [role="radio"][aria-checked="false"]:has([style*="border-radius: 999px"]) > div:not([style*="font"]) {
        background-color: var(--bg-darker) !important;
        &:hover { background-color: var(--highlight) !important; }
    }
    
    /* list style */
    [role="radio"]:has([style*="border-radius: 999px"]):has(> div[style*="font"]:first-child) {
        padding-inline: 0.5em;
        border-radius: 8px;
        &:hover { background-color: var(--highlight) !important; }
    }
    [role="radio"][aria-checked="true"]:has([style*="border-radius: 999px"]):has(> div[style*="font"]:first-child) {
        background-color: var(--accent-more-translucent) !important;
        &:hover { background-color: var(--accent-translucent) !important; }
    }
    
    /* sectioned style */
    [role="radiogroup"]:has([style*="border-left-width"]) [role="radio"]  { 
            background-color: var(--bg-darker) !important;
            &:hover { background-color: var(--highlight) !important; }
            &[aria-checked="true"] { background-color: var(--accent-translucent) !important; }
    }
    
    
    /* ON/OFF TOGGLE */
    div[role="checkbox"] div:has(> [style*="align-self"]) { 
        background-color: var(--bg-darker) !important; 
    }
        /* off */
        div[role="checkbox"][aria-checked="false"] > div[style*="align-self: flex-start"] { background-color: var(--border) !important; }
        div[role="checkbox"][aria-checked="false"] div[style*="align-self: flex-start"] { background-color: var(--accent-translucent) !important; }
        /* on */
        div[role="checkbox"][aria-checked="true"] div:has(> [style*="align-self: flex-end"]) { border-color: var(--accent) !important; }
        div[role="checkbox"][aria-checked="true"] div[style*="align-self: flex-end"] { background-color: var(--accent) !important; }
    
    
    /* CHECKBOX */
    div[role="checkbox"] > div[style*="border-radius: 8px"] { background-color: var(--bg-darker) !important; }
    div[role="checkbox"] > div:has(path[d^="M21.474"]) { background-color: var(--accent-more-translucent) !important; }
    div[role="checkbox"] div:has(> svg) { border-color: var(--accent) !important; }
    div[role="checkbox"] div > svg > path { fill: var(--accent); }
    
    div[role="checkbox"]:hover div[style*="border-width"] { border-color: var(--fg) !important;  }

    /* SETTINGS PAGE */
    /* settings screen button hover opacity */
    #content button[aria-label="Switch account"],
    #content a[href^="/settings/"],
    #content a[href^="/moderation"],
    #content button[aria-label="Help"],
    #content button[aria-label="Sign out"],
    #content a[href*="/about/"],
    #content a[href*="/status"],
    #content a[href*="/sys/log"],
    #content button[aria-label*="Version"]
    { &:hover { background-color: var(--highlight); } }
    
    /* ACCOUNT SETTINGS */
    [aria-label="Update email"],
    [aria-label="Passport"],
    [aria-label="Handle"],
    [aria-label="Export my data"],
    [aria-label="Deactivate account"],
    [aria-label="Delete account"]
    { &:hover { background-color: var(--highlight); } }
    
    [aria-label="Edit"] div { color: var(--accent) !important; &:hover { color: var(--accent-translucent) !important; } }

    /* REPLY SETTINGS */
    button[aria-label="Everybody"],
    button[aria-label="Nobody"],
    button[aria-label="Mentioned users"],
    button[aria-label="Users you follow"],
    button[aria-label="Your followers"] {
    
        &[aria-checked="false"] > div {
             background-color: var(--bg-darker) !important;
             &:hover { background-color: var(--highlight) !important; }
        }
        &[aria-checked="true"] > div {
             background-color: var(--accent-more-translucent) !important;
             &:hover { background-color: var(--accent-translucent) !important; }
        }
    
    }
    
    /* INTERESTS SETTINGS hacky as hell but ah well */
    div[aria-checked="true"] > div[style*="border-radius: 999px"]:has(> div[style*="font"]) { 
        background-color: var(--accent) !important; 
        > div { color: var(--accent-fg) !important}
        &:hover {  background-color: var(--accent-translucent) !important; }
    }
    
    /* MODERATION SETTINGS */ 
    [data-testid="moderationScreen"] a[href^="/moderation"], 
    [data-testid="moderationScreen"] button {
        background-color: var(--bg-darker) !important;
        &:hover { background-color: var(--highlight) !important; }
    }
    
    
    /* ðŸ” SEARCH SIDEBAR */
    nav + div { overflow-x: clip !important; }
    nav + div a[href="#"] { color: var(--fg) !important; }
    
    input + div:not([style*="border-color: rgba(0, 0, 0, 0)"]) { border-color: var(--accent-translucent) !important; }
    div:has(input + div) > div > svg > path[d^="M11 5a6"] { fill: var(--fg-translucent); }
    div:has(input + div:not([style*="border-color: rgba(0, 0, 0, 0)"])) > div > svg >  path[d^="M11 5a6"] { fill: var(--accent); }
    
    button[aria-label="Cancel search"] { 
        background-color: var(--bg-darker) !important;
        &:hover { background-color: var(--highlight) !important; }
        }
    
    
    /* ðŸ§­ NAVIGATION */
    
    /* account switcher */
    nav button[aria-label="Switch accounts"] {
        background-color: transparent !important;
        * { background-color: transparent !important; }
        
        &[aria-expanded="true"] { background-color: var(--accent-more-translucent) !important; }
    }
    
    /* notification numbers */
    nav [aria-label*="unread item"] { 
        background-color: var(--accent) !important;
        padding: 0;
        display: var(--hide-notifications) !important;
        color: var(--hide-notifications-number) !important;
        &:hover { background-color: var(--accent) !important; }
        > div {
            padding: 2px 4px;
            border-radius: 999px;
        }
    }
    
    /* compose post */
    [aria-label="Compose new post"] { 
        background-color: var(--accent) !important; 
        &:hover { background-color: var(--accent-translucent) !important;  }
        > div:has(svg) path { fill: var(--accent-fg-translucent) !important; }
        > div:last-child { color: var(--accent-fg) !important; font-weight: bold !important; }
    }
    
    /* compose post round button */
    [data-testid="composeFAB"] > div {
        background: var(--accent) !important;
        > svg > path { stroke: var(--accent-fg) !important; }
        > svg > line { stroke: var(--accent-fg) !important; }
    }
    
    /* new chat round button */
    [data-testid="newChatFAB"] > div {
        background: var(--accent) !important;
        > svg > path { fill: var(--accent-fg) !important; }
    }
    
    /* section headers */
    div[style*="position: sticky"] { background-color: var(--bg) !important; }
    /* explore page header */
    [data-testid="searchScreen"] div[style*="position: sticky"] { 
        background-color: transparent !important; 
        > div { background-color: var(--bg) !important; }
    }
    
    /* ðŸ  FEEDS */
    
    /* homescreen masthead */
    [data-testid="HomeScreen"] div > div:has(> a[href="/feeds"]) { 
        background-color: var(--bg) !important; 
        padding-bottom: 1em !important; 
    }
    
    /* tabs */
    [role="tablist"] > div {
        background-color: var(--bg);
        
        [role="tab"] { 
            background-color: transparent !important; 
            &:hover { background-color: var(--highlight) !important; }
            div { color: var(--fg-translucent) !important; }
            
            /* selected tab */
            div:has(div[style*="background-color"]) { color: var(--fg) !important; }
            > div > div > div[style*="background-color:"] { background-color: var(--accent) !important; }
            }
    }
    
    
    /* ðŸ“ƒ POSTS */
    div.r-1a11zyx,
    div.r-kdyh1x {
        background-color: var(--bg-darker) !important;
    }
    
    /* display name header */
    a[href^="/profile/"][style*="max-width: 70%;"] {
        color: var(--fg) !important;
        font-weight: bold !important;
        /* making truncating display names consistent ðŸ¦Š */
        max-width: 32ch !important;
        /* @username*/
        ~ a:last-of-type { color: var(--fg-more-translucent) !important; font-weight: bold !important; }
    }
    
    /* tooltip */
    a[href^="/profile/"][data-tooltip] { color: var(--fg-more-translucent) !important; }
    [data-tooltip]::after { background-color: var(--bg-darker) !important; color: var(--fg-translucent) !important; }
    [data-tooltip]::before {
        border-bottom-color: var(--bg-darker) !important; }
        
    /* reposted by */
    [aria-label^="Reposted by"] {
        svg > path { fill: var(--accent-translucent); }
        div { 
            color: var(--fg-more-translucent) !important; 
            a { color: var(--fg-more-translucent) !important; font-weight: bold !important; }
            }
    }
    
    /* replied to */
    [data-testid*="feedItem"] div:has(> svg > path[d^="M15.793 10.293a1"]) > svg > path {
        fill: var(--accent) !important; 
    }
    
    [data-testid*="feedItem"] div:has(> svg > path[d^="M15.793 10.293a1"]) > div { 
        color: var(--fg-translucent) !important; 
        a > span { color: var(--accent) !important; }
    }
    
    [data-testid*="feedItem"] div 
    
    /* content */
    [data-testid="postText"] {
        padding-block: 2px 6px;
    }
    
    /* hidden content */
    [data-testid^="contentHider"] {
            > div > div > button:first-child > div { 
                background-color: var(--highlight) !important;
                &:hover { background-color: var(--accent-more-translucent) !important; }
            }

            button[aria-label="Learn more about the moderation applied to this content"] span { color: var(--accent) !important;}
        }
        
    /* quote post */
    div:has(> [aria-label^="Post by"]) {
        background-color: color-mix(in srgb, var(--bg) 90%, black) !important;
        /* quote post text */
        > div > div { 
            color: var(--fg) !important;
            &[data-word-wrap] { padding-block: 2px 6px; }
            }
    }
        
    /* link preview */
    [data-testid^="feedItem"] a[rel="noopener noreferrer"] > div,
    [data-testid^="postThreadItem"] a[rel="noopener noreferrer"] > div {
        background-color: var(--bg-darker) !important;
        color: var(--fg) !important;
        &:hover { background-color: var(--accent-more-translucent) !important; }
    }
        
    /* interaction buttons */ 
    div[style*="opacity: 0.6"]:has(> [data-testid="replyBtn"]) { opacity: 0.3 !important;}
    
    button[data-testid="replyBtn"],
    button[data-testid="repostBtn"],
    button[data-testid="likeBtn"],
    button[data-testid="postBookmarkBtn"],
    button[data-testid="postShareBtn"],
    button[data-testid="postDropdownBtn"] {
        background-color: transparent !important;
        
        /* icons */
        svg {
            /* repost colour */
            path[fill="#09B35E" i],
            path[fill="#0AC266" i] { fill: #0AC266 !important; }
            /* like colour */
            path[fill="#ec4899" i] { fill: #ec4899 !important; }

        }
        
        /* numbers next to icons */
        [data-testid*="Count"], div[style*="font"] { 
            color: var(--fg-translucent) !important; 
            display: var(--hide-metrics);
        }
    }
    
    /* expanded post display name */
    [data-testid^="postThreadItem"] a[href^="/profile/"] > div > div > div {
        /* display name */
        > div:first-child > div { font-weight: bold !important; }
        /* @username */
        > div:last-child { color: var(--fg-translucent) !important; font-weight: bold !important; }
        
    }
    
    /* expanded post metrics */
    [data-testid*="Count-expanded"] { 
        text-transform: capitalize;
        span { display: var(--hide-metrics); color: var(--fg) !important; }
    }
    
    
    /* video controls */
    [aria-label="Embedded video player"] div { color: white; }
    [data-testid="scrubber"] > div > div {
        opacity: 0.8;
        background-color: var(--border) !important; 
        > div { background-color: white !important; }
    }
    [data-testid="scrubber"] div[role="slider"] { 
        background-color: white !important; 
        height: 12px !important; width: 12px !important; 
        div[style*="border-radius: 999px"] { background-color: var(--border) !important; }
    }

    /* buttons under the scrubber */
    [data-testid="scrubber"] + div> * { opacity: 0.8; }
    
    [aria-label="Play"],
    [aria-label="Pause"],
    [aria-label="Mute"],
    [aria-label="Unmute"],
    [aria-label="Enter fullscreen"] {
        svg > path { fill: white; }
        background-color: transparent !important;
    }
    
    /* timer */
    [aria-label="Play"] ~ div,
    [aria-label="Pause"] ~ div { color: white !important; }
    
    /* latest posts */
    [data-testid="loadLatestBtn"] button[aria-label="Load new posts"] { 
        &:hover { background-color: var(--highlight) !important; opacity: 1 !important; }
        > div { background-color: transparent !important; }
        svg > path { fill: var(--accent); }
    }
    
    /* post status updates */
    [aria-label^="Notifications"] ol > li > div[data-content] > div[data-title] > div { 
        align-items: center;
        background-color: var(--bg-darker) !important;
        > div { padding: 0 !important; }
        svg > path { fill: var(--accent); }
        div > button[aria-label] > div:first-child { 
            background-color: transparent !important; 
            inset: 0 !important;
            }
        div > button[aria-label] > div:last-child { 
            padding: 4px 8px;
            border-radius: 8px;
            background-color: var(--highlight) !important;
            &:hover { background-color: var(--accent-more-translucent) !important;  }
            }
    }
    
    /* thread borders */
    .r-m5arl1 {
        background-color: var(--accent-translucent) !important;
    }
    /* dots */
    .r-1mhb1uw svg line, .r-1mhb1uw svg circle  {
        stroke: var(--accent-translucent) !important;
        fill: var(--accent-translucent) !important;
    }
    .r-1mhb1uw + div { color: var(--accent) !important; }
    /* expanded posts */
    [data-testid^="postThreadItem"] div:has(> div > a[aria-label*="avatar"]) + div,
    div:has([data-testid^="postThreadItem"]) > div:has(> [style*="width: 42px"]) > [style*="width: 42px"] > [style*="width: 2px"]
    { background-color: var(--accent-translucent) !important; }

    
    
    /* ðŸ”” NOTIFICATIONS */
    [data-testid="notifsFeed"] [style*="border-radius: 4px"] {
        background-color: transparent !important;
    }
    
    [data-testid="notifsFeed"] [data-testid^="feedItem"] {
        /* highlighting new interactions */
        &[style*="background-color"], div[style*="background-color"] { background-color: var(--post-highlight) !important; }
        > div > svg > path { fill: var(--accent-translucent) !important; }
    }
    
    /* small text */
    [data-testid="notifsFeed"] [data-testid^="feedItem"] > div > div:last-child > div { color: var(--fg-translucent) !important; }
    
    /* expanded notifs */
    [data-testid="notifsFeed"] [data-testid^="feedItem"] a[href*="/profile/"] > div:last-child > div > div:last-child   { color: var(--fg-translucent) !important;  }
    
    [data-testid="notifsFeed"] div[aria-label*="liked"],
    [data-testid="notifsFeed"] div[aria-label*="reposted"],
    [data-testid="notifsFeed"] div[aria-label*="followed"] { 
        color: var(--fg-translucent) !important;  
        [data-tooltip] { color: var(--fg-more-translucent) !important;   }
        a[href*="/profile/"] { 
            color: var(--fg) !important; 
        }
    }
    
    
    /* ðŸ’¬ CHAT */
    [data-testid="messagesScreen"] a[href^="/messages/"]:hover { background-color: var(--post-highlight) !important; }
    [data-testid="messagesScreen"] a[href^="/messages/"] > div > div {
        > div:nth-child(2) { color: var(--fg-more-translucent) !important; }
        > div:nth-child(3) { color: var(--fg-translucent) !important; }
    }
    /* loading... */
    [data-testid="convoScreen"] div:has(.rotate-500ms) { background-color: var(--bg) !important; }
    
    /* small text */
    [data-testid="convoScreen"] div > span { color: var(--fg-more-translucent) !important; }
    
    /* bubbles */
    [data-testid="convoScreen"] div[style*="flex-direction: row-reverse"] div[style*="align-self: flex-start"] { background-color: var(--bg-darker) !important; }
    [data-testid="convoScreen"] div[style*="align-self: flex-end"] { background-color: var(--accent-more-translucent) !important; }
    
    /* reacts */
    [data-testid="convoScreen"] div:has(> [aria-label*="reacted"]) { background-color: var(--bg-darker) !important; }
    
    
    
    /* PROFILE */
    /* loading */ 
    div[data-testid="profileScreen"] > #content div[style*="height"] { background-color: var(--bg-darker) !important; }
    
    /* @ under display name */
    div:has(> [data-testid="profileHeaderDisplayName"]) + div > div { color: var(--fg-translucent) !important;}
    
    
    /* metrics */
    [data-testid="profileHeaderFollowersButton"],
    [data-testid="profileHeaderFollowersButton"] ~ * { 
        color: var(--fg-more-translucent) !important; 
        display: var(--hide-metrics);
        * { color: var(--fg-more-translucent) !important;  }
    }
    
    /* banner image */
    [data-testid="userBannerFallback"],
    [data-testid="userBannerImage"] { background-color: var(--bg-darker) !important; }
    
    /* description */
    [data-testid="profileHeaderDescription"] a {
        color: var(--accent) !important; 
    }
    
    /* labels */
    [aria-label="View information about these labels"] { 
        background-color: var(--bg-darker) !important; 
        &:hover { background-color: var(--highlight) !important; }
    }
    
    /* followers and following screen */
    
    /* follower count */
    [data-testid="profileFollowersScreen"] > div:first-child > div:nth-child(2) > div:last-child,
    [data-testid="profileFollowsScreen"] > div:first-child > div:nth-child(2) > div:last-child {
        color: var(--fg-more-translucent) !important; 
        display: var(--hide-metrics);
    }
    
    [data-testid="profileFollowersScreen"] a[href^="/profile/"] > div > div:first-child > div:nth-child(2) > div:last-child,
    [data-testid="profileFollowsScreen"] a[href^="/profile/"] > div > div:first-child > div:nth-child(2) > div:last-child{
        color: var(--fg-translucent) !important; 
    }
    
    
    
    /* ðŸ“± MOBILE */
    @media screen and (max-width: 800px) {
        /* bottom nav */
        main + nav[role="navigation"] { background-color: var(--bg) !important; }
        
        /* hamburger nav */
        [data-testid="drawer"] {
            background-color: var(--bg) !important;
            button { background-color: var(--bg) !important; }
            button:hover { background-color: var(--bg) !important; }
            
            [aria-label="Send feedback"] { 
                background-color: var(--accent-more-translucent) !important; 
            }
        }
        
        /* hamburger menu profile card */
        [data-testid="profileCardButton"] > div:last-child {
            color: var(--fg-translucent) !important;
            display: var(--hide-metrics) !important;
        }
        
        /* hamburger menu notifications */
        [data-testid="menuItemButton-Notifications"] div[style*="border-radius: 999px"] {
            background-color: var(--accent) !important;
            > div { color: var(--hide-notifications-number) !important;  }
        }
        
        /* compose post pop-up */
        div:has(> [data-testid="composePostView"]) {
             max-width: min(600px, calc(100vw - 24px)) !important;
             border-radius: 8px;
        }
        
    }